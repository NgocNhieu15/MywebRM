
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Thanh to√°n - ROMAND Official VN</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .co-wrap{max-width:1000px;margin:0 auto;padding:2rem;display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}
    .panel{background:#fff;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.04);padding:1rem}
    label{display:block;margin:.5rem 0 .25rem;font-weight:700;color:#7a585f}
    input,textarea,select{width:100%;padding:.6rem;border:1px solid #f0cbd3;border-radius:8px}
    .sum-line{display:flex;justify-content:space-between;margin:.4rem 0;color:#7a585f}
    .sum-line.total{font-weight:800;color:#d93b5b}
    .btn{width:100%;margin-top:1rem}
    @media (max-width:900px){ .co-wrap{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="logo">ROMAND <span>Official VN</span></div>
      <nav class="nav"><a href="index.html">Trang ch·ªß</a></nav>
      <div class="cart-floating">üõí Gi·ªè (<span id="cart-count">0</span>)</div>
    </div>
  </header>

  <div class="co-wrap">
    <form class="panel" id="co-form">
      <h2>Th√¥ng tin giao h√†ng</h2>
      <label>H·ªç v√† t√™n</label><input id="name" required>
      <label>S·ªë ƒëi·ªán tho·∫°i</label><input id="phone" type="tel" required>
      <label>Email (nh·∫≠n h√≥a ƒë∆°n)</label><input id="email" type="email">
      <label>ƒê·ªãa ch·ªâ</label><textarea id="addr" rows="3" required></textarea>
      <label>Ghi ch√∫</label><textarea id="note" rows="2" placeholder="V√≠ d·ª•: Giao gi·ªù h√†nh ch√≠nh, kh√¥ng g·ªçi khi tr∆∞a..."></textarea>

      <h3>Ph∆∞∆°ng th·ª©c thanh to√°n</h3>
      <select id="pay">
        <option value="COD">Thanh to√°n khi nh·∫≠n h√†ng (COD)</option>
        <option value="BANK">Chuy·ªÉn kho·∫£n ng√¢n h√†ng</option>
        <option value="E-WALLET">V√≠ ƒëi·ªán t·ª≠</option>
      </select>
      <button class="btn" type="submit">X√°c nh·∫≠n ƒë·∫∑t h√†ng</button>
    </form>

    <aside class="panel">
      <h2>ƒê∆°n h√†ng</h2>
      <div id="order-lines"></div>
      <hr style="border:none;height:1px;background:#f3d6de;margin:1rem 0">
      <div class="sum-line"><span>T·∫°m t√≠nh</span><span id="subtotal">‚Ç´0</span></div>
      <div class="sum-line"><span>Ph√≠ v·∫≠n chuy·ªÉn</span><span id="ship">‚Ç´20,000</span></div>
      <div class="sum-line total"><span>T·ªïng c·ªông</span><span id="grand">‚Ç´0</span></div>
    </aside>
  </div>

  <script src="scripts.js"></script>
  <script>
    const lines = document.getElementById('order-lines');
    const subtotalEl = document.getElementById('subtotal');
    const shipEl = document.getElementById('ship');
    const grandEl = document.getElementById('grand');

    function renderSummary(){
      const cart = loadCart();
      lines.innerHTML='';
      let sub = 0;
      cart.forEach(it=>{
        const div = document.createElement('div');
        div.className='sum-line';
        const line = it.price * it.qty;
        sub += line;
        div.innerHTML = \`<span>\${it.name} √ó \${it.qty}</span><span>‚Ç´\${line.toLocaleString('vi-VN')}</span>\`;
        lines.appendChild(div);
      });
      const ship = cart.length ? 20000 : 0;
      subtotalEl.textContent = '‚Ç´' + sub.toLocaleString('vi-VN');
      shipEl.textContent = '‚Ç´' + ship.toLocaleString('vi-VN');
      grandEl.textContent = '‚Ç´' + (sub+ship).toLocaleString('vi-VN');
    }
    renderSummary();

    document.getElementById('co-form').addEventListener('submit', function(e){
      e.preventDefault();
      if(!loadCart().length){ alert('Gi·ªè h√†ng ƒëang tr·ªëng.'); return; }
      const order = {
        name: document.getElementById('name').value.trim(),
        phone: document.getElementById('phone').value.trim(),
        email: document.getElementById('email').value.trim(),
        address: document.getElementById('addr').value.trim(),
        note: document.getElementById('note').value.trim(),
        pay: document.getElementById('pay').value,
        cart: loadCart(),
        total: document.getElementById('grand').textContent
      };
      // Demo: l∆∞u order v√†o localStorage ƒë·ªÉ minh h·ªça
      const orders = JSON.parse(localStorage.getItem('romand_demo_orders')||'[]');
      orders.push(order);
      localStorage.setItem('romand_demo_orders', JSON.stringify(orders));
      // X√≥a gi·ªè v√† chuy·ªÉn v·ªÅ trang ch·ªß
      localStorage.removeItem('romand_demo_cart_v1');
      alert('ƒê·∫∑t h√†ng th√†nh c√¥ng! C·∫£m ∆°n b·∫°n ƒë√£ mua s·∫Øm t·∫°i ROMAND Official VN ‚ô•');
      window.location.href = 'index.html';
    });
  </script>
</body>
</html>
